<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="fontawesome-free-5.15.2-web/css/all.css">
	<!--Custom CSS -->
	<link rel="stylesheet" href="css/style.css">
	<style>
	
	table, th, td {
  		border-collapse: collapse;
	}
	table.center {
  		margin-left: auto;
  		margin-right: auto;
	}
	
	</style>
	
	<title>Home - Fight COVID</title>
</head>

<body>


<header>
	
	<div id="pageHeader">
		<div class="container-fluid">
			<nav class="navbar navbar-light navbar-expand-md" style="background-color:#68a8d3;">
				<a class="navbar-brand" href="">
					<img src="images/stopcovid.jpg" width="50px" alt="">
				</a>
				<button data-toggle="collapse" data-target="#navbarToggler" type="button" class="navbar-toggler"><span
						class="navbar-toggler-icon"></span></button>
				<div class="collapse navbar-collapse" id="navbarToggler">
					<ul class="navbar-nav">
						<li class="nav-item active">
							<a class="nav-link" href="/index"><i class="fas fa-home"></i>Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/news">News</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/aboutus">About us</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" href="#">Registration</a>
							
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/user_reg">Patient registration</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="/doctor_reg">Doctor registration</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="/nurse_reg">Nurse registration</a>
							</div>
						
						</li>
					
					</ul>
					
					<div class="collapse navbar-collapse">
						<ul class="navbar-nav ml-auto">
							<li class="nav-item">
								<a class="nav-link" href="/login"><i class="fas fa-sign-in-alt"></i>Logout</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/admin"><i class="fas fa-user"></i>Admin</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		
		</div>
	</div>

</header>
<!-- End of Header-->

<br>
<h5 align="center"><b>Patient List</b></h5>

<br>
<!--<table id="patients" width="90%" class="center table-striped"></table>-->
<table id="patients" class="table table-striped table-primary"></table>

<!-- Start of Footer-->

<footer class="pagefooter">
	<div class="container-fluid bottom-footer pt-2">
		<div class="row">
			<div class="col-12 text-center">
				<p>Copyrights Â© 2021 - All rights reserved</p>
			</div>
		</div>
	</div>

</footer>


<!-- JavaScript -->
<script>

	// show patients
	getapi('/patients');

	// Defining async function
	async function getapi(url) {

    // Storing response
    const response = await fetch(url);

    // Storing data in form of JSON
    var data = await response.json();
    console.log(data);
    show(data);
	}

	// Function to define innerHTML for HTML table
	function show(data) {
    let tab =
        `<tr>
		<th>ID</th>
		<th>Name</th>
		<th>Phone</th>
		<th>Address</th>
		<th>Date Of Birth</th>
		<th>Email</th>
		</tr>`;

    // Loop to access all rows
    for (let patient of data) {
        tab += `<tr>
	<td>${patient.patientID}</td>
	<td><a href="/selfassessments/${patient.patientID}"> ${patient.patientName} </a></td>
	<td>${patient.phone}</td>
	<td>${patient.address}</td>
	<td>${patient.dateOfBirth}</td>
	<td>${patient.email}</td>
            </tr>`;
    }
    // Setting innerHTML as tab variable
    document.getElementById("patients").innerHTML = tab;
}



</script>
<script src="bootstrap/js/jquery-3.3.1.slim.min.js"></script>
<script src="bootstrap/js/popper.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>

</html>